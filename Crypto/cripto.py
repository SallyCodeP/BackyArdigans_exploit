from string import ascii_lowercase
from random import randint, choice


alfabeto = list(ascii_lowercase)


def __gerar_chave(num=int()):
    tamanho = randint(num, num + 100)
    chave = [choice(alfabeto) for _ in range(0, tamanho)]
    return "".join(chave)


def criptografar(word=str()):
    key = __gerar_chave(len(word))
    cripto_array = list()
    key_array = list()
    for letter in range(0, len(word)):
        if not word[letter] in alfabeto:
            cripto_array.append(str(word[letter]))
        else:
            cripto_array.append(alfabeto.index(word[letter]))
            key_array.append(alfabeto.index(key[letter]))
    return __transformador(cripto_array, key_array)


def __transformador(palavra, indexkey):
    cripto = list()
    indexx = 0
    for numero, local in enumerate(palavra):
        if type(local) != int:
            cripto.append(local)
        else:
            gerador = alfabeto[local:]
            total = 26 - len(gerador)
            for num in range(0, total):
                gerador.append(alfabeto[num])
            cripto.append(gerador[indexkey[indexx]])
            indexx += 1
    chave = [f"{str(a)}-" for a in indexkey]
    return "".join(cripto), "".join(chave)


def descripto(word=str(), passw=str()):
    final = list()
    tamanho = 0
    password = passw.split("-")
    password.pop()
    for letra in word:
        if not letra in alfabeto:
            final.append(letra)
        else:
            equivale = alfabeto.index(letra) - int(password[tamanho])
            if equivale < 0:
                equivale = 26 + equivale
                final.append(alfabeto[equivale])
            else:
                final.append(alfabeto[equivale])
            tamanho += 1
    return "".join(final)
